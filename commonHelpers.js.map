{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\n\n  \n  const searchInput = document.getElementById('searchInput');\n  const searchButton = document.getElementById('searchButton');\n  const imageContainer = document.getElementById('imageContainer');\n  const loadingIndicator = document.getElementById('loadingIndicator');\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  const searchForm = document.getElementById('searchForm'); \n  const endOfResultsMessage = document.getElementById('endOfResultsMessage'); \n\n\n  document.addEventListener('DOMContentLoaded', async function(){\n  const apiKey = '42207002-bb01baf83cbb3b924a651843b';\n  let currentPage = 1;\n  let currentSearchTerm = '';\n  let totalHits = 0; \n  \n  \n\n  searchForm.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      const searchTerm = searchInput.value.trim();\n    \n      if (searchTerm) {\n          currentSearchTerm = searchTerm; \n          currentPage = 1; \n          showLoadingIndicator();\n          try {\n              await searchImages(currentSearchTerm, currentPage);\n              handleLoadMoreButtonVisibility(); \n          } catch (error) {\n            console.error('Error occurred during search:', error);\n          } finally {\n              hideLoadingIndicator();\n              \n          }\n      } else {\n          iziToast.error({\n              title: 'Error',\n              message: 'Please enter a search term.',\n          });\n      }\n  });\n\n  loadMoreButton.addEventListener('click', async () => {\n      currentPage++; \n      showLoadingIndicator();\n      try {\n        await searchImages(currentSearchTerm, currentPage);\n        handleLoadMoreButtonVisibility();\n      } catch (error) {\n          console.error('Error occurred during search:', error);\n      } finally {\n        hideLoadingIndicator();\n         \n      }\n  });\n\n  function displayImages(images) {\n    clearImages();\n    const html = images.map(image => generateImageCard(image)).join('');\n    imageContainer.innerHTML += html; \n    lightbox.refresh();\n  }\n\n  function showLoadingIndicator() {\n      loadingIndicator.style.display = 'block';\n  }\n  \n  function hideLoadingIndicator() {\n      loadingIndicator.style.display = 'none';\n      }\n  \n\n  async function searchImages(query, page) {\n      const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`; \n\n      try {\n          const response = await axios.get(url);\n          const data = response.data;\n\n          if (data.hits && data.hits.length > 0) {\n            totalHits = data.totalHits;\n            if (page === 1) {\n                clearImages(); \n            }\n            displayImages(data.hits);\n            handleLoadMoreButtonVisibility();\n          } else {\n              if (page === 1) { \n                  iziToast.info({\n                      title: 'Info',\n                      message: 'Sorry, there are no images matching your search query. Please try again.',\n                  });\n                  clearImages();\n              } else { \n                  loadMoreButton.style.display = 'none';\n              }\n          }\n      } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching images. Please try again.',\n        });\n         \n      }\n  }\n\n \n\n  function generateImageCard(image) {\n      return `\n          <div class=\"image-card\">\n              <a href=\"${image.largeImageURL}\" class=\"card-link\" data-lightbox=\"image\">\n                  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"card-image\">\n              </a>\n              <div class=\"card-details\">\n                  <p class=\"card-text\"><strong>Likes:</strong> ${image.likes}</p>\n                  <p class=\"card-text\"><strong>Views:</strong> ${image.views}</p>\n              </div>\n              <div class=\"card-details\">\n                  <p class=\"card-text\"><strong>Comments:</strong> ${image.comments}</p>\n                  <p class=\"card-text\"><strong>Downloads:</strong> ${image.downloads}</p>\n              </div>\n          </div>\n      `;\n  }\n\n\n  function clearImages() {\n    imageContainer.innerHTML = '';\n}\n\n  function handleLoadMoreButtonVisibility() {\n    \n        console.log(\"totalHits:\", totalHits);\n        console.log(\"currentPage:\", currentPage);\n    if (totalHits > currentPage * 40) { \n        loadMoreButton.style.display = 'block';\n        endOfResultsMessage.textContent = '';\n    } else { \n        loadMoreButton.style.display = 'none';\n        endOfResultsMessage.textContent = \"We're sorry, but you've reached the end of search results.\";\n    }\n}\n});"],"names":["searchInput","imageContainer","loadingIndicator","loadMoreButton","searchForm","endOfResultsMessage","apiKey","currentPage","currentSearchTerm","totalHits","event","searchTerm","showLoadingIndicator","searchImages","handleLoadMoreButtonVisibility","error","hideLoadingIndicator","iziToast","displayImages","images","clearImages","html","image","generateImageCard","query","page","url","data","axios"],"mappings":"6vBAQE,MAAMA,EAAc,SAAS,eAAe,aAAa,EACpC,SAAS,eAAe,cAAc,EAC3D,MAAMC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAsB,SAAS,eAAe,qBAAqB,EAGzE,SAAS,iBAAiB,mBAAoB,gBAAgB,CAC9D,MAAMC,EAAS,qCACf,IAAIC,EAAc,EACdC,EAAoB,GACpBC,EAAY,EAIhBL,EAAW,iBAAiB,SAAU,MAAOM,GAAU,CACnDA,EAAM,eAAc,EACpB,MAAMC,EAAaX,EAAY,MAAM,KAAI,EAEzC,GAAIW,EAAY,CACZH,EAAoBG,EACpBJ,EAAc,EACdK,IACA,GAAI,CACA,MAAMC,EAAaL,EAAmBD,CAAW,EACjDO,GACH,OAAQC,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CAChE,QAAoB,CACNC,GAEH,CACX,MACUC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACvB,CAAW,CAEX,CAAG,EAEDd,EAAe,iBAAiB,QAAS,SAAY,CACjDI,IACAK,IACA,GAAI,CACF,MAAMC,EAAaL,EAAmBD,CAAW,EACjDO,GACD,OAAQC,EAAO,CACZ,QAAQ,MAAM,gCAAiCA,CAAK,CAC9D,QAAgB,CACRC,GAED,CACP,CAAG,EAED,SAASE,EAAcC,EAAQ,CAC7BC,IACA,MAAMC,EAAOF,EAAO,IAAIG,GAASC,EAAkBD,CAAK,CAAC,EAAE,KAAK,EAAE,EAClErB,EAAe,WAAaoB,EAC5B,SAAS,QAAO,CACjB,CAED,SAAST,GAAuB,CAC5BV,EAAiB,MAAM,QAAU,OACpC,CAED,SAASc,GAAuB,CAC5Bd,EAAiB,MAAM,QAAU,MAChC,CAGL,eAAeW,EAAaW,EAAOC,EAAM,CACrC,MAAMC,EAAM,gCAAgCpB,CAAM,MAAM,mBAAmBkB,CAAK,CAAC,iEAAiEC,CAAI,eAEtJ,GAAI,CAEA,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAElBC,EAAK,MAAQA,EAAK,KAAK,OAAS,GAClClB,EAAYkB,EAAK,UACbF,IAAS,GACTL,IAEJF,EAAcS,EAAK,IAAI,EACvBb,KAEMW,IAAS,GACTR,EAAS,KAAK,CACV,MAAO,OACP,QAAS,0EAC/B,CAAmB,EACDG,KAEAjB,EAAe,MAAM,QAAU,MAG1C,MAAe,CACdc,EAAS,MAAM,CACX,MAAO,QACP,QAAS,4DACrB,CAAS,CAEF,CACJ,CAID,SAASM,EAAkBD,EAAO,CAC9B,MAAO;AAAA;AAAA,yBAEYA,EAAM,aAAa;AAAA,8BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,iEAGHA,EAAM,KAAK;AAAA,iEACXA,EAAM,KAAK;AAAA;AAAA;AAAA,oEAGRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA;AAAA,OAIjF,CAGD,SAASF,GAAc,CACrBnB,EAAe,UAAY,EAC/B,CAEE,SAASa,GAAiC,CAEpC,QAAQ,IAAI,aAAcL,CAAS,EACnC,QAAQ,IAAI,eAAgBF,CAAW,EACvCE,EAAYF,EAAc,IAC1BJ,EAAe,MAAM,QAAU,QAC/BE,EAAoB,YAAc,KAElCF,EAAe,MAAM,QAAU,OAC/BE,EAAoB,YAAc,6DAE1C,CACA,CAAC"}