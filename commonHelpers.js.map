{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', function(){\nconst apiKey = '42207002-bb01baf83cbb3b924a651843b';\nconst searchInput = document.getElementById('searchInput');\nconst searchButton = document.getElementById('searchButton');\nconst imageContainer = document.getElementById('imageContainer');\nconst loadingIndicator = document.getElementById('loadingIndicator');\nconst searchForm = document.getElementById('searchForm');\n\nlet currentPage = 1;\nlet currentSearchTerm = '';\n\nif (!searchForm || !searchInput || !searchButton || !imageContainer || !loadingIndicator) {\n    console.error('One or more elements not found.');\n    return;\n  }\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    const searchTerm = searchInput.value.trim();\n    currentPage =1;\n  \n  if (currentSearchTerm) {\n    showLoadingIndicator();\n    await searchImages(searchTerm);\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search term.',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage++;\n    showLoadingIndicator();\n    await searchImages(currentSearchTerm, currentPage);\n  });\n\n  function showLoadingIndicator() {\n      loadingIndicator.style.display = 'block';\n    }\n    \n  function hideLoadingIndicator() {\n      if(loadingIndicator && loadingIndicator.style.display !== 'none'){\n      loadingIndicator.style.display = 'none';\n    }\n  }\n\n  async function searchImages(query, page) {\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n   if (data.hits && data.hits.length > 0) {\n    if (page === 1) {\n        clearImages();\n      }\n      displayImages(data.hits);\n      loadMoreButton.style.display = 'block'; // Show load more button if there are more images to load\n    } else {\n      if (page === 1) {\n        clearImages();\n        iziToast.info({\n          title: 'Info',\n          message: 'Sorry, there are no images matching your search query. Please try again.',\n        });\n\n    } else {\n        iziToast.info({\n          title: 'Info',\n          message: 'No more images to load.',\n        });\n      }\n      loadMoreButton.style.display = 'none';\n      }\n      \n    } catch(error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again.',\n      });\n      console.error(error);\n    }finally {\n\n        hideLoadingIndicator();\n      }\n}\n\nconst lightbox = new SimpleLightbox('.card-link');\nfunction displayImages(images) {\n  const html = images.map(image => generateImageCard(image)).join('');\n  imageContainer.innerHTML += html;\n  lightbox.refresh();\n}\n\n\nfunction generateImageCard(image) {\n  return `\n    <div class=\"image-card\">\n      <a href=\"${image.largeImageURL}\" class=\"card-link\" data-lightbox=\"image\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"card-image\">\n      </a>\n      <div class=\"card-details\">\n        <p class=\"card-text\"><strong>Likes:</strong> ${image.likes}</p>\n        <p class=\"card-text\"><strong>Views:</strong> ${image.views}</p>\n      </div>\n      <div class=\"card-details\">\n        <p class=\"card-text\"><strong>Comments:</strong> ${image.comments}</p>\n        <p class=\"card-text\"><strong>Downloads:</strong> ${image.downloads}</p>\n      </div>\n    </div>\n  `;\n}\n\nfunction clearImages() {\n  imageContainer.innerHTML = '';\n}\n}); \n\n"],"names":["apiKey","searchInput","searchButton","imageContainer","loadingIndicator","searchForm","currentPage","currentSearchTerm","event","iziToast","showLoadingIndicator","searchImages","hideLoadingIndicator","query","page","url","data","axios","clearImages","displayImages","error","lightbox","SimpleLightbox","images","html","image","generateImageCard"],"mappings":"+vBAMA,SAAS,iBAAiB,mBAAoB,UAAU,CACxD,MAAMA,EAAS,qCACTC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAa,SAAS,eAAe,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAoB,GAExB,GAAI,CAACF,GAAc,CAACJ,GAAe,CAACC,GAAgB,CAACC,GAAkB,CAACC,EAAkB,CACtF,QAAQ,MAAM,iCAAiC,EAC/C,MACD,CAEHC,EAAW,iBAAiB,SAAU,MAAOG,GAAU,CACnDA,EAAM,eAAc,EACDP,EAAY,MAAM,KAAO,EAC5CK,EAAa,EAMbG,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACf,CAAK,CAEL,CAAC,EAED,eAAe,iBAAiB,QAAS,SAAY,CACjDH,IACAI,IACA,MAAMC,EAAaJ,EAAmBD,CAAW,CACrD,CAAG,EAED,SAASI,GAAuB,CAC5BN,EAAiB,MAAM,QAAU,OAClC,CAEH,SAASQ,GAAuB,CACzBR,GAAoBA,EAAiB,MAAM,UAAY,SAC1DA,EAAiB,MAAM,QAAU,OAEpC,CAED,eAAeO,EAAaE,EAAOC,EAAM,CAEvC,MAAMC,EAAM,gCAAgCf,CAAM,MAAM,mBAAmBa,CAAK,CAAC,iEAAiEC,CAAI,eAExJ,GAAI,CAEF,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KACnBC,EAAK,MAAQA,EAAK,KAAK,OAAS,GAC/BF,IAAS,GACTI,IAEFC,EAAcH,EAAK,IAAI,EACvB,eAAe,MAAM,QAAU,UAE3BF,IAAS,GACXI,IACAT,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACnB,CAAS,GAGDA,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,yBACnB,CAAS,EAEH,eAAe,MAAM,QAAU,OAGhC,OAAOW,EAAO,CACbX,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4DACjB,CAAO,EACD,QAAQ,MAAMW,CAAK,CACzB,QAAK,CAEGR,GACD,CACP,CAEA,MAAMS,EAAW,IAAIC,EAAe,YAAY,EAChD,SAASH,EAAcI,EAAQ,CAC7B,MAAMC,EAAOD,EAAO,IAAIE,GAASC,EAAkBD,CAAK,CAAC,EAAE,KAAK,EAAE,EAClEtB,EAAe,WAAaqB,EAC5BH,EAAS,QAAO,CAClB,CAGA,SAASK,EAAkBD,EAAO,CAChC,MAAO;AAAA;AAAA,iBAEQA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,uDAGHA,EAAM,KAAK;AAAA,uDACXA,EAAM,KAAK;AAAA;AAAA;AAAA,0DAGRA,EAAM,QAAQ;AAAA,2DACbA,EAAM,SAAS;AAAA;AAAA;AAAA,GAI1E,CAEA,SAASP,GAAc,CACrBf,EAAe,UAAY,EAC7B,CACA,CAAC"}