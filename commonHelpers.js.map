{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', function(){\n  const apiKey = '42207002-bb01baf83cbb3b924a651843b';\n  const searchInput = document.getElementById('searchInput');\n  const searchButton = document.getElementById('searchButton');\n  const imageContainer = document.getElementById('imageContainer');\n  const loadingIndicator = document.getElementById('loadingIndicator');\n  const loadMoreButton = document.getElementById('loadMoreButton');\n  const searchForm = document.getElementById('searchForm');\n\n  let currentPage = 1;\n  let currentSearchTerm = '';\n  let totalHits = 0;\n\n  if (!searchForm || !searchInput || !searchButton || !imageContainer || !loadingIndicator || !loadMoreButton) {\n      console.error('One or more elements not found.');\n      return;\n    }\n\n  searchForm.addEventListener('submit', async (event) => {\n      event.preventDefault();\n      currentSearchTerm = searchInput.value.trim();\n      currentPage = 1; \n      if (currentSearchTerm) {\n        showLoadingIndicator();\n        await searchImages(currentSearchTerm, currentPage);\n      } else {\n        iziToast.error({\n          title: 'Error',\n          message: 'Please enter a search term.',\n        });\n      }\n    });\n\n  loadMoreButton.addEventListener('click', async () => {\n    currentPage++;\n    showLoadingIndicator();\n    await searchImages(currentSearchTerm, currentPage);\n  });\n\n  function showLoadingIndicator() {\n      loadingIndicator.style.display = 'block';\n    }\n    \n  function hideLoadingIndicator() {\n      if(loadingIndicator && loadingIndicator.style.display !== 'none'){\n      loadingIndicator.style.display = 'none';\n    }\n  }\n\n  async function searchImages(query, page) {\n    const perPage = 15;\n    const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n      const response = await axios.get(url);\n      const data = response.data;\n      if (data.totalHits !== undefined) {\n        totalHits = data.totalHits;\n      }\n      if (data.hits && data.hits.length > 0) {\n        if (page === 1) {\n          clearImages();\n        }\n        displayImages(data.hits);\n        loadMoreButton.style.display = totalHits > imageContainer.children.length ? 'block' : 'none'; \n      } else {\n        if (page === 1) {\n          clearImages();\n          iziToast.info({\n            title: 'Info',\n            message: 'Sorry, there are no images matching your search query. Please try again.',\n          });\n        } else {\n          iziToast.info({\n            title: 'Info',\n            message: 'No more images to load.',\n          });\n        }\n        loadMoreButton.style.display = 'none';\n      }\n     \n      smoothScrollToNextGroup();\n    } catch(error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again.',\n      });\n      console.error(error);\n    } finally {\n      hideLoadingIndicator();\n    }\n  }\n\n  const lightbox = new SimpleLightbox('.card-link');\n  function displayImages(images) {\n    const html = images.map(image => generateImageCard(image)).join('');\n    imageContainer.innerHTML += html;\n    lightbox.refresh();\n  }\n\n  function generateImageCard(image) {\n    return `\n      <div class=\"image-card\">\n        <a href=\"${image.largeImageURL}\" class=\"card-link\" data-lightbox=\"image\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"card-image\">\n        </a>\n        <div class=\"card-details\">\n          <p class=\"card-text\"><strong>Likes:</strong> ${image.likes}</p>\n          <p class=\"card-text\"><strong>Views:</strong> ${image.views}</p>\n        </div>\n        <div class=\"card-details\">\n          <p class=\"card-text\"><strong>Comments:</strong> ${image.comments}</p>\n          <p class=\"card-text\"><strong>Downloads:</strong> ${image.downloads}</p>\n        </div>\n      </div>\n    `;\n  }\n\n  function clearImages() {\n    imageContainer.innerHTML = '';\n  }\n\n  function smoothScrollToNextGroup() {\n    \n    const cardHeight = document.querySelector('.image-card').getBoundingClientRect().height;\n\n    \n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n  }\n});"],"names":["apiKey","searchInput","searchButton","imageContainer","loadingIndicator","loadMoreButton","searchForm","currentPage","currentSearchTerm","totalHits","event","showLoadingIndicator","searchImages","iziToast","hideLoadingIndicator","query","page","url","data","axios","clearImages","displayImages","smoothScrollToNextGroup","error","lightbox","SimpleLightbox","images","html","image","generateImageCard","cardHeight"],"mappings":"owBAMA,SAAS,iBAAiB,mBAAoB,UAAU,CACtD,MAAMA,EAAS,qCACTC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAe,SAAS,eAAe,cAAc,EACrDC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAmB,SAAS,eAAe,kBAAkB,EAC7DC,EAAiB,SAAS,eAAe,gBAAgB,EACzDC,EAAa,SAAS,eAAe,YAAY,EAEvD,IAAIC,EAAc,EACdC,EAAoB,GACpBC,EAAY,EAEhB,GAAI,CAACH,GAAc,CAACL,GAAe,CAACC,GAAgB,CAACC,GAAkB,CAACC,GAAoB,CAACC,EAAgB,CACzG,QAAQ,MAAM,iCAAiC,EAC/C,MACD,CAEHC,EAAW,iBAAiB,SAAU,MAAOI,GAAU,CACnDA,EAAM,eAAc,EACpBF,EAAoBP,EAAY,MAAM,OACtCM,EAAc,EACVC,GACFG,IACA,MAAMC,EAAaJ,EAAmBD,CAAW,GAEjDM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACnB,CAAS,CAET,CAAK,EAEHR,EAAe,iBAAiB,QAAS,SAAY,CACnDE,IACAI,IACA,MAAMC,EAAaJ,EAAmBD,CAAW,CACrD,CAAG,EAED,SAASI,GAAuB,CAC5BP,EAAiB,MAAM,QAAU,OAClC,CAEH,SAASU,GAAuB,CACzBV,GAAoBA,EAAiB,MAAM,UAAY,SAC1DA,EAAiB,MAAM,QAAU,OAEpC,CAED,eAAeQ,EAAaG,EAAOC,EAAM,CAEvC,MAAMC,EAAM,gCAAgCjB,CAAM,MAAM,mBAAmBe,CAAK,CAAC,iEAAiEC,CAAI,eAEtJ,GAAI,CAEF,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAClBC,EAAK,YAAc,SACrBT,EAAYS,EAAK,WAEfA,EAAK,MAAQA,EAAK,KAAK,OAAS,GAC9BF,IAAS,GACXI,IAEFC,EAAcH,EAAK,IAAI,EACvBb,EAAe,MAAM,QAAUI,EAAYN,EAAe,SAAS,OAAS,QAAU,SAElFa,IAAS,GACXI,IACAP,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACrB,CAAW,GAEDA,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,yBACrB,CAAW,EAEHR,EAAe,MAAM,QAAU,QAGjCiB,GACD,OAAOC,EAAO,CACbV,EAAS,MAAM,CACb,MAAO,QACP,QAAS,4DACjB,CAAO,EACD,QAAQ,MAAMU,CAAK,CACzB,QAAc,CACRT,GACD,CACF,CAED,MAAMU,EAAW,IAAIC,EAAe,YAAY,EAChD,SAASJ,EAAcK,EAAQ,CAC7B,MAAMC,EAAOD,EAAO,IAAIE,GAASC,EAAkBD,CAAK,CAAC,EAAE,KAAK,EAAE,EAClEzB,EAAe,WAAawB,EAC5BH,EAAS,QAAO,CACjB,CAED,SAASK,EAAkBD,EAAO,CAChC,MAAO;AAAA;AAAA,mBAEQA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,yDAGHA,EAAM,KAAK;AAAA,yDACXA,EAAM,KAAK;AAAA;AAAA;AAAA,4DAGRA,EAAM,QAAQ;AAAA,6DACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIzE,CAED,SAASR,GAAc,CACrBjB,EAAe,UAAY,EAC5B,CAED,SAASmB,GAA0B,CAEjC,MAAMQ,EAAa,SAAS,cAAc,aAAa,EAAE,sBAAuB,EAAC,OAGjF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACF,CACH,CAAC"}